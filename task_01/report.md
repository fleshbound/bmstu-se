# Домашнее задание, часть 1 (ОПИ)

## Студент: Авдейкина Валерия, группа: ИУ7-23Б

## Постановка задачи

Задан текстовый файл с целыми числами, разделенными произвольным количеством пробелов (допускается наличие символов между числами).
Необходимо вывести на печать те числа из этого файла, которые являются палиндромами.
Наличие символов игнорировать.

### Допущения:

- Числа в файле принадлежат промежутку [0, 4 294 967 295] (беззнаковый целый тип);
- В файле нет вещественных чисел;
- Числа и символы разделены произвольным количеством пробелов;
- Количество чисел в файле не более ста;
- Количество чисел не указывается;

### Пример работы:

| Исходный файл			 | Вывод									|
|------------------------|------------------------------------------|
| Несуществующий файл | Сообщение "Ошибка доступа к файлу |
| Директория | Сообщение "Ошибка доступа к файлу" |
| Пустой файл | Сообщение "Отсутствуют числа" |
| В строке файла есть более 100 чисел	| Сообщение "Отсутствуют числа"  |
| 01&nbsp;&nbsp;&nbsp;02&nbsp;45&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-1 | Сообщение "Палиндромов нет" |
| 010&nbsp;&nbsp;1&nbsp;&nbsp;23&nbsp;0&nbsp;&nbsp;&nbsp;456654 | 010 1 0 456654 |
| 0 a 1 b 12 cc c c 555 f 898 | 0 1 555 898 |

## Декомпозиция

### Диаграмы IDEF0

![01_A0](uploads/6e14857a5b270e24d95ed1af23109906/01_A0.png)

![02_A0](uploads/e612306abdc12c259c3e4712792edbd2/02_A0.png)

![03_A4](uploads/f079029a0f6cf0a7dda8041fa1eff825/03_A4.png)

### Внешние спецификации модулей

#### Блок A1

##### Спецификация

| Имя модуля | check\_file |
|-------------------|-----------------------------------------------------------|
| Функция | Проверка файлового указатель |
| Список параметров | Файловая переменная |
| Входные данные	| Файловая переменная |
| Выходные данные	| Сообщение об ошибке при ее наличии, код возврата (0 - успех, 1 - ошибка) |
| Внешние эффекты	| Печать на экране при наличии ошибки |
| Допущение модуля	| Нет |

##### Тестовые данные

| Имя файла, к которому привязана файловая переменная | Код возврата / Сообщение |
|---|---|
| Имя пустого файла | 0 / - |
| Имя файла с некоторым содержимым | 0 / - |
| Имя несуществующего файла | 1 / Ошибка доступа к файлу |
| Имя директории | 1 / Ошибка доступа к файлу |

Классы эквивалентности: Файл существует (пуст, не пуст), файл не существует, файл является директорией.

##### Псевдокод

**check\_file**
```
Вход: f - файловая переменная
Выход: Код возврата
Примечания: ошибка = 1, успех = 0

ЕСЛИ f не существует ТО
    печатать "Ошибка доступа к файлу"
    ВЕРНУТЬ ошибка
ВСЕ ЕСЛИ

ВЕРНУТЬ успех
```

#### Блок A2

##### Спецификация

| Имя модуля | read\_array |
|-------------------|-----------------------------------------------------------|
| Функция | Считывание массива чисел, расположенных в файле |
| Список параметров | Файловая переменная, массив, количество элементов массива |
| Входные данные	| Файловая переменная, массив целых чисел |
| Выходные данные	| Количество элементов массива |
| Внешние эффекты	| Перемещение указателя в файле, изменение массива чисел |
| Допущение модуля	| Файл не содержит вещественных чисел, в файле содержится не более ста чисел |

##### Тестовые данные

| Содержимое файла | Элементы массива / Возвращаемое число |
|-----|-----|
| Пустой файл | Пустой массив / 0 |
| 5 | 5 / 1 |
| 1 2 3 4 | 1 2 3 4 / 4 |
| 1 a 2 b 3 c | 1 2 3 / 3 |
| Более ста чисел | Массив / 0 |
| Более ста чисел, посторонние символы | Пустой массив / 0 |

Классы эквивалентности: Пустая строка, строка содержит только целые числа (менее ста), строка содержит не только целые числа (их менее ста), строка содержит более ста целых чисел (без/с посторонними символами)

##### Псевдокод

**read\_array**
```
Вход: f - файловая переменная
Выход: arr - массив целых чисел, n - кол-во элементов массива
Примечание: ошибка = 1, успех = 0, num - буфер для чтения целого числа, n - счетчик чисел

n = 0
num = 0

ПОКА не конец файла ДЕЛАТЬ
	код = прочитать элемент целого типа num
	
	ЕСЛИ код = успех ТО
	    n = n + 1
	    
	    ЕСЛИ n > 100 ТО
		    ВЕРНУТЬ 0
        ИНАЧЕ
            arr[n - 1] = num
	    ВСЕ ЕСЛИ
	ВСЕ ЕСЛИ
ВСЕ ПОКА

ВЕРНУТЬ n
```

#### Блок А3

##### Спецификация

| Имя модуля | get\_flags |
|----|---------|
| Функция | Заполнение массива флагов каждого элемента массива чисел в соответствии с формой палиндрома |
| Список параметров | Массив, количество элементов в массиве, массив флагов |
| Входные данные        | Массив, кол-во элементов в массиве, массив флагов |
| Выходные данные       | Код возврата (1 в случае ошибки, 0 в случае успеха) |
| Внешние эффекты       | Изменение значения элементов массива флагов |
| Допущение модуля      | Массив флагов, исходный массив - массивы целых чисел, количество элементов - целое беззнаковое число |

##### Тестовые данные

| Кол-во эл-тов / Массив | Массив флагов / код возврата |
|-----|-----|
| 3 / 1 22 01 | 1 1 0 / 0 |
| 4 / 12 23 45 67 | 0 0 0 0 / 0 |
| 3 / 11 22 33 | 1 1 1 / 0 |
| 3 / 11 01 21 | 1 0 0 / 0 |
| 0 / Пустой массив | 1 |

Классы эквивалентности: нет палиндромов, есть палиндромы (один, несколько, все), пустой массив

##### Псевдокод

**get\_flags**
```
Вход: arr - массив целых чисел,
      n - количество элементов массива,
      flags - массив флагов
Выход: Код возврата
Примечание: ошибка = 1, успех = 0, i - счетчик цикла

ЕСЛИ n = 0 ТО
    печатать "Отсутствуют числа"
    ВЕРНУТЬ ошибка
ВСЕ ЕСЛИ

i=0
ПОКА i < n ДЕЛАТЬ
	ЕСЛИ is_palindrom(arr[i]) != 0 ТО
		flags[i] = 1
	ИНАЧЕ
	    flags[i] = 0
	ВСЕ ЕСЛИ
ВСЕ ПОКА

ВЕРНУТЬ успех
```

#### Блок А4

##### Спецификация

| Имя модуля | print\_numbers |
|----|---------|
| Функция | Вывод на экран чисел-палиндромов массива в соответствии с массивом флагов |
| Список параметров | Массив, количество элементов в массиве, массив флагов |
| Входные данные        | Массив, кол-во элементов в массиве, массив флагов |
| Выходные данные       | Код возврата (1 - ошибка, 0 - успех), сообщение |
| Внешние эффекты       | Печать на экране |
| Допущение модуля      | Массив состоит из целых чисел, массив флагов состоит только из 0 и 1, количество элементов - целое беззнаковое число |

##### Тестовые данные

| Кол-во чисел / Массив / Массив флагов | Числа на экране / Код возврата / Сообщение |
|-----|-----|
| 5 / 1 2 3 4 5 / 1 1 1 1 1 | 1 2 3 4 5 / 0 / - |
| 2 / 7 12 / 1 0 | 7 / 0 / - |
| 0 / Пустой массив / Пустой массив | Пусто / 1 / Массив пуст |
| 3 / 12 13 14 / 0 0 0 | - / 1 / Палиндромов нет |

Классы эквивалетности: Массив флагов заполнен нулями, в массиве флагов есть одна единица, в массиве флагов несколько единиц, исходный массив пуст (длина = 0)

##### Псевдокод

**print\_numbers**
```
Вход: arr - массив целых чисел,
      n - кол-во элементов в массиве,
      flags - массив флагов (элементы либо 0, либо 1)
Выход: Код возврата
Примечания: успех = 0, ошибка = 1, q - счетчик выведенных на экран чисел, i - счетчик цикла

ЕСЛИ n = 0 ТО
    печатать "Отсутствуют числа"
    ВЕРНУТЬ ошибка
ВСЕ ЕСЛИ

i = 0
q = 0
ПОКА i < n ДЕЛАТЬ
	ЕСЛИ flags[i] = 1 ТО
		печатать arr[i]
		q = q + 1
	ВСЕ ЕСЛИ
	i = i + 1
ВСЕ ПОКА

ЕСЛИ q = 0 ТО
    печатать "Палиндромов нет"
    ВЕРНУТЬ ошибка
ВСЕ ЕСЛИ

ВЕРНУТЬ успех
```

#### Блок А32

##### Спецификация

| Имя модуля | is\_palindrom |
|----|---------|
| Функция | Определяет, является ли переданное число палиндромом |
| Список параметров | Число, признак |
| Входные данные        | Число |
| Выходные данные       | Признак |
| Внешние эффекты       | Нет |
| Допущение модуля      | На вход подается целое число |

##### Тестовые данные

| Число | Результат (1 - Истина; 0 - Ложь) |
|-----|-----|
| 11 | 1 |
| 1 | 1 |
| 12 | 0 |
| 121 | 1 |

Классы эквивалентности: число палиндром (длина четная, нечетная), число не палиндром

##### Псевдокод

**is\_palindrom**
```
Вход: num - число
Выход: признак
Примечание: num_arr - массив целых чисел (цифр числа), temp, len, i - целые числа, истина = 1, ложь = 0

temp = num
len = 0
ПОКА temp > 0 ДЕЛАТЬ
	temp = temp/10
	len = len+1
ВСЕ ПОКА

i = 0
temp = num
ПОКА i < len ДЕЛАТЬ
	num_arr[i] = temp mod 10
	temp = temp/10
	i = i + 1
ВСЕ ПОКА

i = 0
признак = истина
ПОКА i < len/2 ДЕЛАТЬ
	ЕСЛИ num_arr[i] != num_arr[len-i-1] ТО
		признак = ложь
	ВСЕ ЕСЛИ
ВСЕ ПОКА

ВЕРНУТЬ признак
```

### Псевдокод основной программы

```
Вход: имя файла
Выход: Код возврата
Примечания: f - файловая переменная, arr - массив целых чисел, n - количество элементов в массиве, 
            flags - массив целых чисел (элементы либо 0, либо 1), успех = 0, ошибка = 1

Открыть файл f с указанным именем на чтение

код = check_file(f)

ЕСЛИ код = ошибка ТО
    ВЕРНУТЬ код
ВСЕ ЕСЛИ

len = read_array(f, arr)
код = get_flags(arr, len, flags)
код = print_numbers(arr, len, flags)

ЕСЛИ код = ошибка ТО
    ВЕРНУТЬ код
ВСЕ ЕСЛИ

закрыть файл f

ВЕРНУТЬ успех
```
